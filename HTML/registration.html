<html>
<!-- This pages purpose is to create a new user by requesting and taking input information and converting it to an array
     that stores the user data in localStorage-->
<head>
    <title> Login and Registration Form</title>
    <link rel="stylesheet" type="text/css" href="../CSS/registration.css">
    <link rel="stylesheet" type="text/css" href="../CSS/general.css">
    <link href="../Javascript/registration.js">
    <link href="../Javascript/userList.js">
    <link href="../Javascript/user.js">
    <link href="../Javascript/Login.js">
<body>

<!-- Here we create the login form. It has input fields for the required information that we need from a new user.
     Each field is set as required. The password field also has certain parameters which the user must abide by.-->
<div class="login-page">
    <div class ="form">
    <form class="register-form">
        <input type="text" id="fullname" placeholder="full name" title="Please enter your full name" required>

        <input type="date" id="birthday" placeholder="birthday" title="Please enter your birthday" required>

        <input type="email" id="email" placeholder="email" title="Please enter your email" required>

        <input type="text" id="userName" placeholder="username" title="Please enter your username" required>

        <input type="password" id="psw" placeholder="password" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}"
               title="Password must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters" required>

        <input type="number" id="teleNmb" placeholder="contact number" title="Please enter you contact number" required>

        <input type="password" id="confirm_password" placeholder="repeat password" title="Please repeat your password" required>

        <input type="submit" value="CREATE ACCOUNT" onclick="createUser()">

        <p class="message">Already Registered? <a href="#">Login</a></p>
    </form>


    <form class="login-form">
        <input type="text" id="usernameInput" placeholder="username">
        <input type="password" id="passwordInput" placeholder="password">
        <input type="submit" value="LOGIN" id="login" onclick="login">
        <p class="message">Not Registered? <a href="#">Register</a>


    </form>

    </div>

    <div id="message">
        <h3>Password must contain the following:</h3>
        <p id="letter" class="invalid">A <b>lowercase</b> letter</p>
        <p id="capital" class="invalid">A <b>capital (uppercase)</b> letter</p>
        <p id="number" class="invalid">A <b>number</b></p>
        <p id="length" class="invalid">Minimum <b>8 characters</b></p>
    </div>

</div>

<!-- Here we call the script code from jquery. jQuery is a JavaScript library designed to simplify HTML and it
 allows us to animate with ease the transition between a sign-up form and a log-in form when the user clicks the link -->
<script src='https://code.jquery.com/jquery-3.2.1.min.js'></script>

<!-- In this script we code the transition animation, so that when clicking the message "a" (which in this case is either
 "Already Registered?" or "Not Registered") it will animate with a toggle function -->
<script>
    $('.message a').click(function(){
    $('form').animate({height: "toggle", opacity: "toggle"}, "slow");
    });
</script>

<script>
    // In this script we want to create a security measure to make sure, that the user can see if their password meets the requirements set by the input-field

    var password = document.getElementById("psw");
    var letter = document.getElementById("letter");
    var capital = document.getElementById("capital");
    var length = document.getElementById("length");

    // Script to show a message box when password field is clicked
    password.onfocus = function () {
        document.getElementById("message").style.display = "block";
    }

    // Script to hide the message box when the user clicks outside of the password field
    password.onblur = function () {
        document.getElementById("message").style.display = "none";
    }

    // Script that starts when the user starts to write in the password field
    password.onkeyup = function () {
        // Check to see if there are lowercase letters
        var lowerCaseLetters = /[a-z]/;
        if(password.value.match(lowerCaseLetters)){
            letter.classList.remove("invalid");
            letter.classList.add("valid");
        } else {
            letter.classList.remove("valid");
            letter.classList.add("invalid");
        }

        // Check to see if there are capital letters
        var upperCaseLetters = /[A-Z]/;
        if (password.value.match(upperCaseLetters)) {
            capital.classList.remove("invalid");
            capital.classList.add("valid");
        } else {
            capital.classList.remove("valid");
            capital.classList.add("invalid");
        }

        // Check to see if there are numbers
        var numbers = /[0-9]/;
        if (password.value.match(numbers)){
            number.classList.remove("invalid");
            number.classList.add("valid");
        } else {
            number.classList.remove("valid");
            number.classList.add("invalid");
        }


        // Check to see if length is greater than 8
        if (password.value.length >= 8) {
            length.classList.remove("invalid");
            length.classList.add("valid");
        } else {
            length.classList.remove("valid");
            length.classList.add("invalid");
        }
    }

// Here we take the input data and assign them to their respective id values.
this.fullname = document.getElementById("name").value;
this.birthday= document.getElementById("birthday").value;
this.email = document.getElementById("email").value;
this.psw = document.getElementById("psw").value;
this.userName = document.getElementById("userName").value;
this.teleNmb= document.getElementById("teleNmb").value;

// We now create a function which creates a user array of the input-data.
function createUser () {
    localStorage.setItem("fullname", fullname.value);
    localStorage.setItem("birthday", birthday.value);
    localStorage.setItem("email", email.value);
    localStorage.setItem("psw", psw.value);
    localStorage.setItem("userName", userName.value);
    localStorage.setItem("teleNmb", teleNmb.value);
    alert("New user created");
    console.log(localStorage);
}

    /* This functions purpose is to check to see if the password is correct in both inputs.
        ATM it does not work

    function check_pass() {
        if (document.getElementById("psw").value ==
            document.getElementById("confirm password").value)
            document.getElementById("submit").disable = false
            } else {
            document.getElementById("submit").disabled = true
    }
     */

</script>


</body>
</html>